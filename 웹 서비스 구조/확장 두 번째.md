## 웹 상호작용의 이해: 단방향과 양방향 통신

웹 환경에서의 상호작용은 크게 단방향과 양방향으로 구분될 수 있다.

### 1. 단방향 상호작용

단방향 상호작용의 핵심 요소는 스크립트와 리소스 처리 과정이다.

**스크립트의 특성**

- 동적 성격: 리소스의 동작 형태를 정의
- 실행 위치: 서버에 존재하지만 클라이언트 측에서 실행
- CORS(Cross-Origin Resource Sharing)와 밀접한 관련성을 지님
    - CORS:
        - 한 출처에서 실행 중인 웹 애플리케이션이 다른 출처(origin)의 선택한 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 체제이다.
        - 여기서 출처란 프로토콜, 호스트, 포트의 조합을 의미한다.
        - 웹 브라우저의 기본 보안 정책인 동일 출처 정책(Same-Origin Policy)을 우회하여 어떤 출처의 스크립트가 자신의 리소스에 접근할 수 있는지 명시적으로 지정한다.
        - 이처럼 서버는 CORS 헤더를 통해 악의적인 스크립트가 다른 출처의 리소스에 무단으로 접근하는 것을 방지할 수 있다.

**리소스 응답 처리 과정**

1. 구문 분석: Parser가 수신된 데이터를 분석
2. 렌더링: 분석된 데이터를 화면에 시각적으로 출력
3. 스크립트 실행: JavaScript 엔진을 통해 스크립트 구동

**JavaScript 엔진**

- 정의: JavaScript 코드를 실행하는 인터프리터
- 기능: JavaScript를 해석하고 실행하여 웹 페이지에 동적 기능을 부여

### 2. 양방향 상호작용

양방향 상호작용에서는 상태 관리와 데이터 저장이 중요한 역할을 한다.

**상태 관리의 필요성**

HTTP 프로토콜은 기본적으로 stateless이지만, 실제 웹 애플리케이션에서는 상태 전이가 필요하다. 이를 위해 데이터를 저장하고 관리하는 구현체가 요구된다.

**데이터 저장 방식**

1. **데이터베이스**: 서버 측에서 대량의 구조화된 데이터를 저장하고 관리
2. **쿠키(Cookie)**:
    - 정의: 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각
    - 구성 요소:
        - name(key): 쿠키의 식별자
        - value: 저장된 데이터 값
        - expires: 쿠키의 유효 기간
        - domain: 쿠키가 유효한 도메인 범위
        - path: 쿠키가 반환되는 서버 경로
        - secure: 보안 연결(HTTPS) 사용 여부
        - httpOnly: HTTP 프로토콜 외 접근 제한 설정
    - 종류:
        - 세션 쿠키(Session CooKie): 해당 세션이 유지되는 동안에만 유효한 쿠키로, 이후 사용자가 웹 브라우저를 종료하면 세션 쿠키는 삭제 (사용 예시: 로그인, 쇼핑 장바구니)
        - 지속 쿠키(Persistent CooKie): 사용자의 컴퓨터에 저장되어 설정된 기간동안 유효한 쿠키로, 사용자가 웹 브라우저를 종료해도 유지 (사용 예시: 사용자의 선호 설정, 언어 선택, 로그인)
        - 제3자 쿠키(Third-Party CooKie): 사용자가 방문하는 웹사이트 이외의 도메인에서 설정된 쿠키로, 웹사이트와는 독립적으로 작동 (사용 예시:  웹사이트의 통계, 광고 제공, 사용자 행동 분석)
3. **로컬 스토리지(Local Storage)**:
쿠키와 비교하여 다음과 같은 특징을 지닌다.
    - 저장 용량: 쿠키(4KB) < 로컬 스토리지(5MB)
    - 데이터 지속성: 로컬 스토리지는 명시적으로 삭제하지 않는 한 영구 저장
    - 데이터 타입: 로컬 스토리지는 문자열 외에도 JavaScript의 기본 타입과 객체 저장 가능
    - 사용 목적: 로컬 스토리지는 보안 위험이 낮은 데이터나 네트워크 연결이 불안정한 환경에서 유용
    - 서버 통신: 쿠키는 모든 HTTP 요청에 포함되지만, 로컬 스토리지는 클라이언트 측에만 존재

**웹 서버와 WAS의 역할**

- 웹 서버: 데이터 송수신의 주체로서 클라이언트와 서버 간 통신을 담당
- WAS(Web Application Server):
    - 데이터 처리의 주체로서 비즈니스 로직을 실행
    - MVC(Model-View-Controller) 아키텍처에서 컨트롤러 역할을 수행하여 모델과 뷰 사이의 상호작용을 조정

**사용자 입력 처리**

사용자로부터 받은 입력 데이터는 신뢰할 수 없으므로, 반드시 서버 측에서 적절한 검증 과정을 거쳐 한다. 이는 웹 애플리케이션의 보안과 안정성을 위해 필수적인 단계이다.

### References

- [CooKie](https://www.coinex.com/ko/academy/detail/828-what-are-cookies?pId=31)
- [CORS](https://youthstory.tistory.com/243)
