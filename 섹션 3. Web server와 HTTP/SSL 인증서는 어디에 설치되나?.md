# SSL 인증서는 어디에 설치되나?

## SSL 인증서

- HTTP에서 HTTPS를 적용할 때 웹 서버에 SSL 인증서가 설치되어 있음
- 클라이언트가 웹 서버에 접속하면, 웹 서버에서 SSL인증서를 가지고 다운받아서 검증
- 웹서버(내가 접속한 사이트)가 진짜인지 SSL인증서를 보고 공증

### PKI(Public Key Infrastructure) 기술

- 공개 키 알고리즘을 통한 암호화 및 정보 통신에 필요한 인증을 제공하기 위한 복합적인 보안 환경
- 암호화와 복호화 키로 구성된 공개키를 이용해 송수신 데이터를 암호화하고 디지털 인증서를 통해 사용자를 인증하는 시스템
- Public Key와 Private Key 쌍을 가지고 암호화 및 복호화
    1. Public Key 암호화 - Private Key 복호화
    2. Private Key 암호화 - Public Key 복호화
- Public Key는 key만 보면 key 소유자가 누구인지 확인 가능

***대칭키 : 암호화와 복호화에서 같은 키를 사용*

***비대칭키 : 암호화와 복호화에 다른 키를 사용. Public Key와 Private Key쌍으로 이루어짐*

### PKI 인증체계

![image](https://github.com/user-attachments/assets/9a02332b-3837-43a5-b107-350556a15fe5)

- User Information + Public Key + 암호화된 CA 서명
- Public Key를 보면 Key 소유자가 누구인지 확인 가능하므로, 위 변조를 방지하기 위해 Hash 결과를 암호화하여 한 세트로 만듦
    
    ⇒ X.509 형식
    
- 인증서 파일은 X.509형식으로 만들어진 파일

### 인증서 검증 과정

1. 웹 서버는 클라이언트 측에 인증서를 공개
2. 클라이언트가 접속을 하여 HTTP 통신을 하기 전, 웹 서버의 인증서를 먼저 가져옴
3. 클라이언트는 윈도우 업데이트 시 다운받은 인증서(루트 인증서 등)로 검증을 수행
    - 인증서 발급 : 인증기관(CA-RA)로부터 인증서를 구매하여 저장

```
🤔 기업 자체 인증서를 사용한다면?

- 기업 내부에서 자체적으로 Root CA(최상위 인증기관)을 운영하거나 중간 CA를 사용하여 인증서를 발급함

- 웹 서버가 제공한 인증서를 검증하려고 하지만 기본적으로 신뢰할 수 있는 인증기관에 포함되지 않음
=> 기업의 인증서를 사전에 클라이언트에 설치
```

### 인증서 설치 위치

- 일반적으로 웹 서버에 SSL 인증서 설치됨
- 경우에 따라 보안장치와 부하분산장치에 인증서가 설치될 수 있음
    - 겉으로는 웹 서버로 보이지만 WAF이거나 WAF를 포함하는 IPS 보안장치일 수 있음
    - 부하 분산 장치에도 설치될 수 있음

## HTTP 통신 암호화

- 클라이언트에서 생성하는 세션키(Session Key)로 HTTP 통신을 암호화하여 HTTPS 적용
- HTTP 통신 내역 암호화 할 때 인터넷이라는 Public 네트워크에서 보호함. 클라이언트쪽에서 생성하는 대칭키(세션키)를 사용하여 암호화함

## SSL 인증서와 HTTP 통신 암호화 비교

|  | SSL 인증서 | HTTP 통신 암호화 |
| --- | --- | --- |
| Key | 공개키(Public Key) | 클라이언트에서 생성한 세션키(대칭키) |
| 목적 | 서버의 신뢰성을 보장하고, 암호화된 통신을 시작 | 실제 HTTP 데이터의 기밀성을 보장 |
| 설치 위치 | 웹 서버 | 서버와 클라이언트 간의 실제 통신 |

---
#### 참고자료

https://nordvpn.com/ko/blog/pki/

https://danyoujeong.tistory.com/222
